{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import{AuthContext}from'../contexts/AuthContext';import LoadingSpinner from'../components/LoadingSpinner';import{toast}from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Notifications=()=>{const{token}=useContext(AuthContext);const[notifications,setNotifications]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const fetchData=async()=>{if(!token){toast.error('No hay token de autenticación');setLoading(false);return;}try{const response=await fetch('/api/notifications?page=1&limit=10',{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});if(response.ok){const data=await response.json();setNotifications(data.notifications||[]);toast.success('Notificaciones cargadas correctamente');}else{const errorText=await response.text();toast.error(\"Error: \".concat(response.status,\" - \").concat(errorText));}}catch(error){toast.error(\"Error de conexi\\xF3n: \".concat(error.message));}finally{setLoading(false);}};fetchData();},[token]);if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',maxWidth:'800px',margin:'0 auto'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Notificaciones\"}),notifications.length>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Lista de Notificaciones:\"}),notifications.map((notification,index)=>{var _notification$vehicul;return/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #ccc',padding:'10px',margin:'10px 0',borderRadius:'5px'},children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tipo:\"}),\" \",notification.tipo]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Veh\\xEDculo:\"}),\" \",((_notification$vehicul=notification.vehiculo)===null||_notification$vehicul===void 0?void 0:_notification$vehicul.numeroInterno)||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Fecha Vencimiento:\"}),\" \",new Date(notification.fechaVencimiento).toLocaleDateString()]})]},index);})]}):/*#__PURE__*/_jsx(\"p\",{children:\"No hay notificaciones disponibles\"})]});};export default Notifications;","map":{"version":3,"names":["React","useState","useEffect","useContext","AuthContext","LoadingSpinner","toast","jsx","_jsx","jsxs","_jsxs","Notifications","token","notifications","setNotifications","loading","setLoading","fetchData","error","response","fetch","headers","concat","ok","data","json","success","errorText","text","status","message","style","padding","maxWidth","margin","children","length","map","notification","index","_notification$vehicul","border","borderRadius","tipo","vehiculo","numeroInterno","Date","fechaVencimiento","toLocaleDateString"],"sources":["C:/Users/Pipe/Desktop/REQUERIMIENTO_LUIS/REQUERIMIENTO_LUIS/frontend/src/pages/Notifications.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../contexts/AuthContext';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport { toast } from 'react-hot-toast';\n\nconst Notifications = () => {\n  const { token } = useContext(AuthContext);\n  const [notifications, setNotifications] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      if (!token) {\n        toast.error('No hay token de autenticación');\n        setLoading(false);\n        return;\n      }\n\n      try {\n        const response = await fetch('/api/notifications?page=1&limit=10', {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        });\n\n        if (response.ok) {\n          const data = await response.json();\n          setNotifications(data.notifications || []);\n          toast.success('Notificaciones cargadas correctamente');\n        } else {\n          const errorText = await response.text();\n          toast.error(`Error: ${response.status} - ${errorText}`);\n        }\n      } catch (error) {\n        toast.error(`Error de conexión: ${error.message}`);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [token]);\n\n  if (loading) {\n    return <LoadingSpinner />;\n  }\n\n  return (\n    <div style={{ padding: '20px', maxWidth: '800px', margin: '0 auto' }}>\n      <h1>Notificaciones</h1>\n      \n      {notifications.length > 0 ? (\n        <div>\n          <h2>Lista de Notificaciones:</h2>\n          {notifications.map((notification, index) => (\n            <div key={index} style={{ \n              border: '1px solid #ccc', \n              padding: '10px', \n              margin: '10px 0',\n              borderRadius: '5px'\n            }}>\n              <p><strong>Tipo:</strong> {notification.tipo}</p>\n              <p><strong>Vehículo:</strong> {notification.vehiculo?.numeroInterno || 'N/A'}</p>\n              <p><strong>Fecha Vencimiento:</strong> {new Date(notification.fechaVencimiento).toLocaleDateString()}</p>\n            </div>\n          ))}\n        </div>\n      ) : (\n        <p>No hay notificaciones disponibles</p>\n      )}\n    </div>\n  );\n};\n\nexport default Notifications;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,UAAU,KAAQ,OAAO,CAC9D,OAASC,WAAW,KAAQ,yBAAyB,CACrD,MAAO,CAAAC,cAAc,KAAM,8BAA8B,CACzD,OAASC,KAAK,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExC,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAEC,KAAM,CAAC,CAAGT,UAAU,CAACC,WAAW,CAAC,CACzC,KAAM,CAACS,aAAa,CAAEC,gBAAgB,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACc,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAE5CC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAe,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CAACL,KAAK,CAAE,CACVN,KAAK,CAACY,KAAK,CAAC,+BAA+B,CAAC,CAC5CF,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEA,GAAI,CACF,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,oCAAoC,CAAE,CACjEC,OAAO,CAAE,CACP,eAAe,WAAAC,MAAA,CAAYV,KAAK,CAAE,CAClC,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CAEF,GAAIO,QAAQ,CAACI,EAAE,CAAE,CACf,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAL,QAAQ,CAACM,IAAI,CAAC,CAAC,CAClCX,gBAAgB,CAACU,IAAI,CAACX,aAAa,EAAI,EAAE,CAAC,CAC1CP,KAAK,CAACoB,OAAO,CAAC,uCAAuC,CAAC,CACxD,CAAC,IAAM,CACL,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAR,QAAQ,CAACS,IAAI,CAAC,CAAC,CACvCtB,KAAK,CAACY,KAAK,WAAAI,MAAA,CAAWH,QAAQ,CAACU,MAAM,QAAAP,MAAA,CAAMK,SAAS,CAAE,CAAC,CACzD,CACF,CAAE,MAAOT,KAAK,CAAE,CACdZ,KAAK,CAACY,KAAK,0BAAAI,MAAA,CAAuBJ,KAAK,CAACY,OAAO,CAAE,CAAC,CACpD,CAAC,OAAS,CACRd,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDC,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,CAACL,KAAK,CAAC,CAAC,CAEX,GAAIG,OAAO,CAAE,CACX,mBAAOP,IAAA,CAACH,cAAc,GAAE,CAAC,CAC3B,CAEA,mBACEK,KAAA,QAAKqB,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,QAAQ,CAAE,OAAO,CAAEC,MAAM,CAAE,QAAS,CAAE,CAAAC,QAAA,eACnE3B,IAAA,OAAA2B,QAAA,CAAI,gBAAc,CAAI,CAAC,CAEtBtB,aAAa,CAACuB,MAAM,CAAG,CAAC,cACvB1B,KAAA,QAAAyB,QAAA,eACE3B,IAAA,OAAA2B,QAAA,CAAI,0BAAwB,CAAI,CAAC,CAChCtB,aAAa,CAACwB,GAAG,CAAC,CAACC,YAAY,CAAEC,KAAK,QAAAC,qBAAA,oBACrC9B,KAAA,QAAiBqB,KAAK,CAAE,CACtBU,MAAM,CAAE,gBAAgB,CACxBT,OAAO,CAAE,MAAM,CACfE,MAAM,CAAE,QAAQ,CAChBQ,YAAY,CAAE,KAChB,CAAE,CAAAP,QAAA,eACAzB,KAAA,MAAAyB,QAAA,eAAG3B,IAAA,WAAA2B,QAAA,CAAQ,OAAK,CAAQ,CAAC,IAAC,CAACG,YAAY,CAACK,IAAI,EAAI,CAAC,cACjDjC,KAAA,MAAAyB,QAAA,eAAG3B,IAAA,WAAA2B,QAAA,CAAQ,cAAS,CAAQ,CAAC,IAAC,CAAC,EAAAK,qBAAA,CAAAF,YAAY,CAACM,QAAQ,UAAAJ,qBAAA,iBAArBA,qBAAA,CAAuBK,aAAa,GAAI,KAAK,EAAI,CAAC,cACjFnC,KAAA,MAAAyB,QAAA,eAAG3B,IAAA,WAAA2B,QAAA,CAAQ,oBAAkB,CAAQ,CAAC,IAAC,CAAC,GAAI,CAAAW,IAAI,CAACR,YAAY,CAACS,gBAAgB,CAAC,CAACC,kBAAkB,CAAC,CAAC,EAAI,CAAC,GARjGT,KASL,CAAC,EACP,CAAC,EACC,CAAC,cAEN/B,IAAA,MAAA2B,QAAA,CAAG,mCAAiC,CAAG,CACxC,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAxB,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}